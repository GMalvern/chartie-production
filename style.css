/* =========================================================
   Chartie — Clean, de-duplicated styles.css
   ========================================================= */

:root{
  --accent:#f59e0b;
  --title-font:'Patrick Hand', cursive;
  --body-font:'Poppins', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

/* ===== Base ===== */
body{
  background:#f6f7fb;
  color:#0f172a;
  font-family:var(--body-font);
}

/* ===== Sheet & paper ===== */
.paper{
  background:#fff;
  border-radius:1.25rem;
  box-shadow:0 10px 20px rgba(0,0,0,.06);
  overflow:hidden;
}

/* Anchor sheet frame (pink margin line) */
.anchor-sheet{
  position:relative;
  border-radius:1.25rem;
  border:1px solid rgba(15,23,42,.12);
  overflow:hidden;
  background-color:#fdfcf7;
  box-shadow:
    inset 0 0 15px rgba(0,0,0,.06),
    0 10px 30px rgba(15,23,42,.6);
}
.anchor-sheet::before{
  content:"";
  position:absolute;
  inset:0;
  border-left:4px solid #ff8ab5;
  transform:translateX(46px);
  pointer-events:none;
}

/* ===== Backgrounds for builder toggle ===== */

/* Lined (Light) – warm notebook paper, horizontal rules only */
.bg-lined-light{
  background-color:#fffdf5;
  background-image:
    linear-gradient(to bottom, rgba(148,163,184,.30) 1px, transparent 1px);
  background-size:32px 32px;
}

/* Lined (Dark) */
.bg-lined-dark{
  background-color:#f5efe3;
  background-image:
    linear-gradient(to bottom, rgba(148,163,184,.40) 1px, transparent 1px);
  background-size:32px 32px;
}

/* Graph – only when teacher chooses "Graph" */
.bg-graph{
  background-color:#ffffff;
  background-image:
    linear-gradient(to bottom, rgba(148,163,184,.32) 1px, transparent 1px),
    linear-gradient(to right,  rgba(148,163,184,.32) 1px, transparent 1px);
  background-size:24px 24px;
}

.bg-poster{
  background:#ffffff;
}
.bg-blank{
  background:#ffffff;
}

/* ===== Typography & headings ===== */
.marker-title{
  font-family:var(--title-font);
  font-weight:400;
  color:#0f172a;
  letter-spacing:.3px;
  text-shadow:0 1px 0 rgba(255,255,255,.6);
}

.marker-h{
  font-family:var(--title-font);
  color:#0f172a;
  font-size:1.15rem;
  line-height:1.1;
  margin-bottom:.25rem;
}

/* Global h1 breathing room (prevents clipping in exports) */
h1{
  line-height:1.2;
  padding-top:0.3em;
  padding-bottom:0.35em;
}

/* Extra safety for any chart containers used on landing / builder */
#output h1,
#print-area h1,
#preview h1,
#rendered-chart h1,
.chart-title{
  line-height:1.25 !important;
  padding-top:0.3em !important;
  padding-bottom:0.35em !important;
  display:block !important;
}

#output,
#print-area,
#preview,
#rendered-chart{
  padding-top:1rem !important;
  padding-bottom:1rem !important;
  overflow:visible !important;
}

/* ===== Highlight system for titles/text ===== */

/* Base wrapper */
.hl{
  position:relative;
  display:inline-block;
  padding-bottom:0.05em;
}

/* Clean underline – uses ::after so it sits under the text */
.hl-clean{
  text-decoration:none;
  background:none;
}
.hl-clean::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-0.12em;
  height:0.16em;
  background:var(--accent, #f59e0b);
  border-radius:999px;
  z-index:-1;
}

/* Brush stroke underline — uses SVG brush, shifted lower */
.hl-brush{
  text-decoration:none;
  background-image:var(--brush-url);
  background-repeat:no-repeat;
  background-size:100% 0.7em;
  background-position:0 90%;
}

/* None — truly nothing */
.hl-none{
  text-decoration:none;
  background:none;
}
.hl-none::after{
  content:none;
}

/* In card headings we don’t want the thick orange band inside <span.hl> */
.card .marker-h .hl{
  text-decoration:none;
  background:transparent;
  box-shadow:none;
}

/* Card heading underline: subtle marker stroke under the whole title */
.card .marker-h{
  position:relative;
  display:inline-block;
  padding-bottom:0.15rem;
}
.card .marker-h::after{
  content:"";
  position:absolute;
  left:0.05rem;
  right:0.4rem;
  bottom:0.05rem;
  height:3px;
  border-radius:999px;
  background:linear-gradient(
    90deg,
    rgba(249,115,22,0.9),
    rgba(249,201,84,0.9)
  );
  opacity:0.9;
}

/* ===== Cards & lists ===== */
.card{
  background:rgba(255,255,255,0.7);
  border:1px solid rgba(15,23,42,.12);
  border-radius:0.75rem;
  padding:0.5rem 0.75rem;
  box-shadow:
    0 1px 3px rgba(0,0,0,0.08),
    0 4px 12px rgba(0,0,0,0.06);
}

.pretty-list li{
  margin:.25rem 0 .35rem 0;
  padding-left:.1rem;
}

/* Slightly bigger, clearer steps & math lines inside cards */
.card ol li,
.card .mathface div{
  font-size:0.95rem !important;
  line-height:1.4 !important;
  color:#0f172a !important;
}
.card ol{
  padding-left:1.25rem !important;
  margin-top:0.25rem;
  margin-bottom:0.25rem;
}

/* Accent swatches */
.swatch{
  width:28px;
  height:28px;
  border-radius:.5rem;
  border:1px solid rgba(0,0,0,.1);
  cursor:pointer;
}

/* Big text toggle */
.bigtext .marker-title{
  font-size:2.2rem;
}
.bigtext .pretty-list{
  font-size:1.125rem;
}

/* ===== Badges + progress bar ===== */
.badge{
  font-size:.75rem;
  font-weight:600;
  background:#e5e7eb;
  color:#111827;
  padding:.25rem .5rem;
  border-radius:.5rem;
}
.progress-wrap{
  position:relative;
  height:10px;
  border-radius:999px;
  background:#e5e7eb;
  overflow:hidden;
}
.progress-fill{
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:0%;
  background:linear-gradient(90deg, var(--accent), #f97316);
  transition:width .25s ease;
}
.pencil{
  position:absolute;
  top:-14px;
  left:0;
  transform:translateX(-8px);
  width:32px;
  height:32px;
}
.pencil svg{
  filter:drop-shadow(0 1px 2px rgba(0,0,0,.25));
}

/* ===== Math / equations ===== */
.eqbox{
  background:#f3f6fb;
  border:1px solid #e5e7eb;
  border-radius:.75rem;
  padding:.6rem .8rem;
}
.math-hand .mathface{
  font-family:'Patrick Hand','Kalam',cursive;
  font-weight:400;
  letter-spacing:.2px;
}
.mathface{
  font-variant-ligatures:none;
}

/* Inline stacked fractions */
.frac{
  display:inline-flex;
  flex-direction:column;
  align-items:center;
  font-size:0.9em;
  line-height:1;
  vertical-align:middle;
  margin:0 0.08em;
}
.frac .num{
  padding-bottom:0.05em;
}
.frac .den{
  padding-top:0.05em;
}
.frac .bar{
  width:100%;
  border-top:1.3px solid currentColor;
  margin:0 -0.05em;
}

/* ===== Utilities ===== */
.visually-hidden{
  position:absolute!important;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}
.ghostbtn{
  border:1px dashed #cbd5e1;
}
.quote{
  font-family:'DM Serif Display',serif;
  font-size:1.25rem;
  line-height:1.35;
}
.pill{
  display:inline-block;
  padding:.2rem .55rem;
  border-radius:999px;
  background:rgba(15,23,42,.05);
  font-size:.75rem;
}
.row-wrap{
  display:flex;
  flex-wrap:wrap;
  gap:.75rem;
}
.minw-0{ min-width:0; }

/* ===== Sticky note ===== */
.sticky{
  position:absolute;
  top:18px;
  right:18px;
  width:220px;
  max-width:40%;
  background:#fff8c7;
  border:1px solid rgba(0,0,0,.12);
  border-radius:.6rem;
  box-shadow:0 12px 24px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.8);
  transform:rotate(1.2deg);
  padding:.65rem .7rem .75rem .7rem;
}
.sticky::after{
  /* tape */
  content:"";
  position:absolute;
  top:-10px;
  left:40px;
  right:40px;
  height:16px;
  background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.15));
  border:1px solid rgba(0,0,0,.08);
  filter:blur(.2px);
  transform:rotate(-1.5deg);
  border-radius:.2rem;
}
.sticky h4{
  font-family:'Patrick Hand', cursive;
  font-size:0.95rem;
  text-transform:uppercase;
  letter-spacing:0.04em;
  margin-top:0.75rem;
  margin-bottom:0.25rem;
  color:#0f172a;
}
.sticky p{
  font-family:'Satisfy', cursive;
  font-size:1.05rem;
  line-height:1.45;
  color:#0f172a;
  letter-spacing:0.01em;
  white-space:pre-wrap;
}

/* ===== Hero / landing tweaks ===== */
.bg-slate-900 .marker-title,
.bg-slate-900 .marker-h{
  color:#0f172a;
}

/* Subtle BOOM! pulse once on load */
.tagline-boom{
  display:inline-block;
  animation:boomPulse 0.38s ease-out 1.1s both;
}
@keyframes boomPulse{
  0%{ transform:scale(1); text-shadow:none; }
  20%{ transform:scale(1.06); text-shadow:0 0 8px rgba(251,191,36,.5); }
  60%{ transform:scale(1.02); text-shadow:0 0 4px rgba(251,191,36,.35); }
  100%{ transform:scale(1); text-shadow:none; }
}
@media (prefers-reduced-motion: reduce){
  .tagline-boom{
    animation:none !important;
    transform:none !important;
    text-shadow:none !important;
  }
}

/* Landing-page sample charts: darker text */
.landing-preview,
.landing-sample,
#landing-sample,
.sample-chart,
.sample-output{
  color:#1e293b !important;
}
.landing-preview *,
.landing-sample *,
.sample-chart *,
.sample-output *{
  color:#1e293b !important;
}

/* Fade-in on landing preview */
.hidden.md\:block .paper{
  opacity:0;
  transform:translateY(10px);
  animation:paperShow 0.9s cubic-bezier(.19,1,.22,1) forwards;
}
@keyframes paperShow{
  to{
    opacity:1;
    transform:translateY(0);
  }
}

/* ===== Misc ===== */

/* Hide the format badge pill on all charts and exports */
#format-badge{
  display:none !important;
}
/* =========================================================
   Highlight Mode Overrides (Safe Production Patch)
   ========================================================= */

/* Default safety: no underlines unless explicitly enabled */
.hl-mode-none .card .marker-h::after{
  content:none !important;
}

/* Clean underline mode */
.hl-mode-clean .card .marker-h::after{
  content:"";
  position:absolute;
  left:0.05rem;
  right:0.4rem;
  bottom:0.05rem;
  height:3px;
  border-radius:999px;
  background:linear-gradient(
    90deg,
    rgba(249,115,22,0.9),
    rgba(249,201,84,0.9)
  );
  opacity:0.9;
}

/* Brush mode mirrors clean for cards (optional) */
.hl-mode-brush .card .marker-h::after{
  content:"";
  position:absolute;
  left:0.05rem;
  right:0.4rem;
  bottom:0.07rem;
  height:0.6em;
  background-image:var(--brush-url);
  background-repeat:no-repeat;
  background-size:100% 100%;
  opacity:0.9;
}
/* =========================================================
   Landing hero spacing patch
   ========================================================= */

/* Reduce huge gap between navbar and hero text */
main{
  padding-top:3.5rem !important;  /* adjust up/down if you want */
}

/* On large screens, keep it comfy but not huge */
@media (min-width:1024px){
  main{
    padding-top:4rem !important;
  }
}
/* Landing sample sticky note tweak */
.landing-preview .sticky,
.sample-chart .sticky,
.sample-output .sticky{
  width:180px;          /* was 220px */
  top:26px;             /* a bit lower */
  right:26px;
  transform:rotate(0.8deg);
}

.landing-preview .sticky h4,
.sample-chart .sticky h4,
.sample-output .sticky h4{
  font-size:0.9rem;
}

.landing-preview .sticky p,
.sample-chart .sticky p,
.sample-output .sticky p{
  font-size:0.98rem;
}


